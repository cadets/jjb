- builder:
    name: checkout-scripts
    builders:
      - shell: |
          rm -fr cadets-ci
          git clone --depth=1 --single-branch https://github.com/lwhsu/cadets-ci.git

- builder:
    name: execute-job-build-script
    builders:
      - shell: |
          sh -ex cadets-ci/jobs/${JOB_NAME}/build.sh

- publisher:
    name: scan-clang-warnings
    publishers:
      - warnings:
          console-log-parsers:
            - Clang (LLVM based)

- publisher:
    name: publish-junit-results
    publishers:
      - junit:
          results: test-report.xml

- publisher:
    name: slack-notification
    publishers:
      - raw:
          xml: |
            <jenkins.plugins.slack.SlackNotifier>
              <teamDomain>cadets</teamDomain>
              <authToken/>
              <authTokenCredentialId>d34e56c1-b102-4a93-8178-26c9ba0c52a9</authTokenCredentialId>
              <buildServerUrl>/</buildServerUrl>
              <room>#ci</room>
              <startNotification>false</startNotification>
              <notifySuccess>false</notifySuccess>
              <notifyAborted>true</notifyAborted>
              <notifyNotBuilt>true</notifyNotBuilt>
              <notifyUnstable>true</notifyUnstable>
              <notifyFailure>true</notifyFailure>
              <notifyBackToNormal>true</notifyBackToNormal>
              <notifyRepeatedFailure>false</notifyRepeatedFailure>
              <includeTestSummary>false</includeTestSummary>
              <commitInfoChoice>NONE</commitInfoChoice>
              <includeCustomMessage>false</includeCustomMessage>
              <customMessage/>
            </jenkins.plugins.slack.SlackNotifier>
